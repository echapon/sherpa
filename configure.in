dnl Process this file with autoconf to produce a configure script.

AC_INIT(SHERPA MC, 1.1.3, support@sherpa-mc.de, SHERPA-MC)
AM_CONFIG_HEADERS(config.h ATOOLS/Org/CXXFLAGS.H ATOOLS/Org/CXXFLAGS_PACKAGES.H)
AM_INIT_AUTOMAKE
AM_DISABLE_STATIC
AC_PREFIX_DEFAULT(${PWD})

AC_CANONICAL_BUILD
SHERPA_SETUP_BUILDSYSTEM

dnl Checks for programs.
AC_PROG_INSTALL
AC_PROG_MAKE_SET
AC_PROG_CXX
AC_PROG_CC

AC_PROG_FC(gfortran g95 g77)
AC_FC_LIBRARY_LDFLAGS
AC_FC_WRAPPERS
## Hack to make libtool use the FC Fortran compiler via F77, since
## libtool < 2.x doesn't understand --tag=FC
F77=$FC
AM_FFLAGS=$AM_FCFLAGS
AC_SUBST(F77)
AC_SUBST(AM_FFLAGS)
FORTRANLIBADD="$FCLIBS"
AC_SUBST(FORTRANLIBADD)

AM_PROG_LIBTOOL
dnl Checks for header files.
AC_HEADER_STDC
dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_TYPE_SIZE_T
dnl Checks for library functions.
AC_CHECK_FUNCS(mkdir)

SHERPA_SETUP_CONFIGURE_OPTIONS

SHERPA_SETUP_VARIABLES

AC_OUTPUT(ATOOLS/Math/Makefile \
	  ATOOLS/Phys/Makefile \
	  ATOOLS/Org/Makefile \
	  ATOOLS/Makefile \
          HELICITIES/Main/Makefile \
          HELICITIES/Makefile \
	  BEAM/Main/Makefile \
	  BEAM/Makefile \
	  PDF/Main/Makefile \
	  PDF/LHAPDF/Makefile \
	  PDF/MRST/Makefile \
	  PDF/CTEQ/Makefile \
	  PDF/GRV/Makefile \
	  PDF/Sudakov/Makefile \
	  PDF/Remnant/Makefile \
	  PDF/Makefile \
	  MODEL/Decays/Makefile \
	  MODEL/Interaction_Models/Makefile \
	  MODEL/Main/Makefile \
	  MODEL/Makefile \
	  PHASIC++/Main/Makefile \
	  PHASIC++/Makefile \
 	  EXTRA_XS/Model/Makefile \
	  EXTRA_XS/Main/Makefile \
	  EXTRA_XS/Two2Two/Makefile \
	  EXTRA_XS/Makefile \
	  AMEGIC++/Main/Makefile \
	  AMEGIC++/Amplitude/Makefile \
	  AMEGIC++/Amplitude/Zfunctions/Makefile \
	  AMEGIC++/Phasespace/Makefile \
	  AMEGIC++/String/Makefile \
	  AMEGIC++/Makefile \
	  APACIC++/Main/Makefile \
	  APACIC++/Showers/Makefile \
	  APACIC++/Makefile \
	  AMISIC++/Tools/Makefile \
	  AMISIC++/Model/Makefile \
	  AMISIC++/Main/Makefile \
	  AMISIC++/Makefile \
	  AHADIC++/Tools/Makefile \
	  AHADIC++/Formation/Makefile \
	  AHADIC++/Decays/Makefile \
	  AHADIC++/Main/Makefile \
	  AHADIC++/Makefile \
	  HADRONS++/Main/Makefile \
	  HADRONS++/ME_Library/Makefile \
	  HADRONS++/Current_Library/Makefile \
	  HADRONS++/PS_Library/Makefile \
	  HADRONS++/Run/Makefile \
	  HADRONS++/Makefile \
	  PHOTONS++/Main/Makefile \
          PHOTONS++/Tools/Makefile \
          PHOTONS++/PhaseSpace/Makefile \
          PHOTONS++/MEs/Makefile \
	  PHOTONS++/Makefile \
	  ANALYSIS/Makefile \
	  ANALYSIS/Tools/Makefile \
	  ANALYSIS/Main/Makefile \
	  ANALYSIS/Triggers/Makefile \
	  ANALYSIS/Detector/Makefile \
	  ANALYSIS/Observables/Makefile \
	  SHERPA/Tools/Makefile \
	  SHERPA/LundTools/pythia6214.f \
	  SHERPA/LundTools/Makefile \
	  SHERPA/Initialization/Makefile \
	  SHERPA/PerturbativePhysics/Makefile \
	  SHERPA/SoftPhysics/Makefile \
	  SHERPA/Single_Events/Makefile \
	  SHERPA/Main/Makefile \
	  SHERPA/Run/Makefile \
          SHERPA/Run/makelibs \
	  SHERPA/Run/CTEQ6Grid/Makefile \
	  SHERPA/Run/MRST99Grid/Makefile \
	  SHERPA/Makefile \
	  TOOLS/Makefile \
          TOOLS/Sherpa-config \
	  Makefile )

if test "x$VERSIONING" != "x"; then
  mv "TOOLS/Sherpa-config" "TOOLS/Sherpa$VERSIONING-config"
fi
